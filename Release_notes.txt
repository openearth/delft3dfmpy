Release notes delft3dfmpy 

----------------------------------------------------------------------------------------------------------------------
 v2.0.3: October 2022

This release of delft3dfmpy is known to be compatible with, and is tested with, D-Hydro Suite 2022.04.

Updates (relative to v2.0.1):
 - Profiles that are linked to structures (through profile_groups and profile_lines) were erroneously not dropped from the set of profiles that were use for branches. In the GUI, therefore, the profile connected to the bridge was already assigned to a branch; the bridge was assigned a default profile. Now, profiles that are linked to a structure are dropped from the set of profile locations.
 - The seepage defintions in RR contained a periodicity, which lead D-Hydro to ignore everything after the first year. The periodicity was removed.
 - Certain definitions in HyDAMO DAMO2.2 data were case-sensitive (Overlaat/Onderlaat, for instance). Where applicable in the code, these comparisons are now case insensitive. 
 - When sewage areas and catchments do not overlap, paved areas were not calculated correctly. This is fixed - now sewage areas and catchments do not necessarily have to overlap and for both the correct areas are calculated.
 - In the MDU, the settings 'AutoTimestepNoStruct' and 'AutoTimestepNoQout' are by default set to 1. This decreases calculation times for 1d considerably. The value can be changed in the workflow as is shown in the example notebooks.

 - notebooks were changed accordingly
 
Note that some things do not work correctly with the GUI yet:
 - 2d observations points cannot be imported;
 - structure time series should be provided through RTC and cannot be included in the BC-file;
 - Initial condition by polygon does not work correctly;
 - Time series for seepage are not supported;
 - Some settings in the RR-model, that can considerably affect results, are not imported. Most importantly this pertains to 'UnpavedPercolationLikeSobek213’;

----------------------------------------------------------------------------------------------------------------------
 v2.0.2: September 2022

This release of delft3dfmpy is known to be compatible with, and is tested with, D-Hydro Suite 2022.04.

Updates (relative to v2.0.1):
 - functionality added to remove 1d2d-links within a polygon;
 - double line (PartionFile) in template MDU removed;
 - roughness definitions were not fully consistent with HyDAMO DAMO2.2 (e.g. StricklerKs is allowed in HyDAMO DAMO 2.2, but not yet in D-HyDAMO). They are now mapped to D-Hydro definitions;
 - fixed some bugs in the compulsory columns definition for the input GPKG. Globalid is no longer required for the object 'ruwheidprofiel' and 'typeruwheid' no longer for 'hydroobject';
 - notebooks were changed accordingly
 
Note that some things do not work correctly with the GUI yet:
 - 2d observations points cannot be imported;
 - structure time series should be provided through RTC and cannot be included in the BC-file;
 - Initial condition by polygon does not work correctly;
 - Time series for seepage are not supported;
 - Some settings in the RR-model, that can considerably affect results, are not imported. Most importantly this pertains to 'UnpavedPercolationLikeSobek213’;

----------------------------------------------------------------------------------------------------------------------
 v2.0.1: June 2022

This release of delft3dfmpy is known to be compatible with, and is tested with, D-Hydro Suite 2022.03.

It also contains a major updata where the input data format changed from HyDAMO v12 GML-files to HyDAMO DAMO2.2 GPKG (geopackage).

Updates:
- all input data changed to HyDAMO DAMO2.2 format. A function is included to show GPKG file contents. See the example notebooks or details.
- added support for constant lateral discharges (instead of artificial time series);
- handling of sewage areas has been changed. Paved area inside a sewer area is distributed over the overflows without intersecting with the catchments. For the paved fraction of catchment that does not intersect with sewer areas, a paved node is created as well.
- branches to which default profile definitions are assigned can be specified.
- instead of Moergesstelsbroek, a part of the Oostrumsche beek is used as an example model, as HyDAMO DAMO2.2 data was available. This is the first model based on this data, so there might still be some errors in the schematisation or the model/output might not be completely realistic.

Note that some things do not work correctly with the GUI yet:
 - 2d observations points cannot be imported;
 - structure time series should be provided through RTC and cannot be included in the BC-file;
 - Initial condition by polygon does not work correctly;
 - Time series for seepage are not supported;
 - Some settings in the RR-model, that can considerably affect results, are not imported. Most importantly this pertains to 'UnpavedPercolationLikeSobek213’;

----------------------------------------------------------------------------------------------------------------------
 v1.2.3: June, 2022
 
This version is the last update to the package based on HyDAMO v12 GML-files. This release of delft3dfmpy is known to be compatible with, and is tested with, D-Hydro Suite 2022.03.

Updates compared to v1.2.2:
- added support for constant lateral discharges (instead of artificial time series);
- handling of sewage areas has been changed. Paved area inside a sewer area is distributed over the overflows without intersecting with the catchments. For te paved fraction of catchment that does not intersect with sewer areas, a paved node is created as well.

Differences with simultaneously released v2.0.0:
- HyDAMO DAMO2.2-GPKG data is required instead of HyDAMO v12-GML;
- a part of the Oostrumsche beek is used as an example model instead of Moergestelsbroek;
- A default profile is assigned to all branches without profiles; in v2.0.0 branches can be specified.

There are still some known issues to be solved in the GUI of D-Hydro:
- compound structures are not read by the GUI.
- in the GUI, structure related time series (e.g. crest levels) need to be schematized using RTC, so no time series can be provided as is possible using DIMR.
- after running the model in the GUI, there is an error regaring the import of certain RR-output (3blinks.his). This is a known issue.
- the GUI issues some warnings about the links to and from paved notes (dry weather flow and WWTP). This will addressed in the next version.


----------------------------------------------------------------------------------------------------------------------
 v1.2.2: March, 2022
 
 This release of delft3dfmpy is known to be compatible with, and is tested with, D-Hydro Suite 2022.02.

- now more than one 'afsluitmidddel' can be connected to a culvert (e.g. of types schuif and a terugslagklep)
- function added to remove 1d2d-links to end nodes in the 1d-network. They are interpreted as boundaries by D_Hydro and therefore should not have 1d2d-links connected to them
- bug fix in notebook to add quotes around DELFT3B.INI start- and endtime definitions
- added a WWTP to paved nodes
- added possibility of column mapping to hydamo objects without a geometry (e.g. afsluitmiddel).

There are still some known issues to be solved in the GUI of D-Hydro:
- compound structures are not read by the GUI
- in the GUI, structure related time series (e.g. crest levels) need to be schematized using RTC, so no time series can be provided as is possible using DIMR.
- after running the model in the GUI, there is an error regaring the import of certain RR-output (3blinks.his). This is a known issue.
- the GUI issues some warnings about the links to and from paved notes (dry weather flow and WWTP). This will addressed in the next version.


----------------------------------------------------------------------------------------------------------------------
 v1.2.1: December, 2021

This release of delft3dfmpy is known to be compatible with, and is tested with, D-Hydro Suite v1.0.0.

The D-HYDRO GUI requires a unique crosssection definitiation for every location. This didn't work correctly for a 'default'-profile when this is used for multiple locations. Now, the default definition is copied for all separate locations. Note that in the default profile definition in the workflow, an argument "name" should be added and called 'default': ", name='dafault". See example notebooks for details.

----------------------------------------------------------------------------------------------------------------------
 v1.2.0: September, 2021

This release of delft3dfmpy is intended to accompany the release of D-Hydro suite v1.0.0.

Updates:
- improvement in treatment of RR-FM laterals: when boundaries are not linked to any RR-nodes (e.g. in small (urban only) catchments where all the area is treated in a sewer area), they are removed from the boundaries, and the FM-lateral is switched to a time series lateral (if one is available).
- Bedlevels of bridges are now set in the profile definition. The bridge defintion contains a 'shift' parameter which is set to 0. Bridge crosssections need to be either of type yx or parameterized. Closed profiles cannot be used, in that case the bridge will need to be schematized as a culvert.
- Extra parameters were added to the MDU-file
- AAF parameter removed from PAVED definition
- GW parameter in UNPAVED changed to GA
- support for storage nodes is implemented. 
- IDs for 1d-network nodes, and therefore nodeids of boundaries changed
- initial conditions are now directly placed in the 'fm' folder and no longer in separate subfolder
- header of the file BoundaryConditions.bc updated
- zonalstats_alltouched argument: documentation incorrectly said that only pixels that are entirely inside the polygon are taken into account. It should say that pixels of which the centroids are inside the polygon are taken into account.

Note that some things do not work correctly with the GUI yet:
 - 2d observations points cannot be imported
 - structure time series, currently written in the BC-file, are not imported and should be provided through RTC (not supported yet)
 - Initial condition by polygon does not work correctly
 - Time series for seepage are not supported
 - Some settings in the RR-model, that can considerably affect results, are not imported. Most importantly this pertains to 'UnpavedPercolationLikeSobek213’.
 
 ----------------------------------------------------------------------------------------------------------------------
 v1.1.3: March 2021
 
Minor modifications and bug fixes:

structure time series now imlemented in *.bc format.
structure time series can be provided for weir crestlevels, orifice lower gate edges and culvert valves.
time series starttime independent of refdate in MDU
bug fixed in the path of initial condition .pol file
observations points can now be provided as both shapely Point() objects and (x,y)-tuples
notebooks extended to accomodate and test these features

----------------------------------------------------------------------------------------------------------------------
 v1.1.2: January 2021
Bug fix: land use type 12 (bare soil) was (incorrectly) not taken into account.
2D grid generation considerably speeded up.

----------------------------------------------------------------------------------------------------------------------
 v.1.1.1: January 2021
Added logging and progress bars to RR

----------------------------------------------------------------------------------------------------------------------
 v1.1.0: December 2020
Added general functionality, e.g. option to incorporate OSM data.

----------------------------------------------------------------------------------------------------------------------
 v1.0.2: December 2021
Optimized meteo-raster processing for speed; enabled multi-polygon intersections for paved areas in RR.

----------------------------------------------------------------------------------------------------------------------
 v1.0.1: November 2021
constant boundaries are not written as time series anymore
removed netcdf output option from RR model
input instance check implemented

----------------------------------------------------------------------------------------------------------------------
 v.1.0.: November 2020
Initial release of delft3dfmpy.
